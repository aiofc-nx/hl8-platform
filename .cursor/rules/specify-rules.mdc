---
description: 前置提示
globs:
alwaysApply: true
---
# hl8-platform Development Guidelines

**我是一个中国软件工程师，你应当使用中文与我交流**

## Constitution Reference

本项目遵循项目宪章规范，详见 `.specify/memory/constitution.md`

## 项目配置

本项目各子项目统一了typescript、eslint、jest配置，详见:
1、`.cursor/docs/backend-typescript-jest-configuration.md`。
2、`.cursor/docs/backend-eslint-configuration.md`。

**所有服务端项目必须使用 NodeNext 模块系统**

- **核心配置**：module: "NodeNext", moduleResolution: "NodeNext", target: "ES2022", strict: true
- **package.json 配置**：type: "module", engines: { "node": ">=20" }
- **禁止使用 CommonJS**：不允许在新项目中使用 CommonJS 模块系统

## 代码即文档原则

**代码注释必须清晰、准确、完整地描述业务规则与逻辑**

- **遵循 TSDoc 注释规范**
- **所有公共 API、类、方法、接口、枚举都必须添加完整的 TSDoc 注释**
- **注释必须包含**：
  - @description: 功能描述和业务逻辑
  - @param: 参数说明（含业务含义）
  - @returns: 返回值说明
  - @throws: 异常情况说明
  - @example: 使用示例
- **业务规则详细描述**
- **代码变更时必须同步更新注释**

**理由**：通过详细的注释让代码本身成为最好的业务文档，减少文档维护成本，提高团队协作效率，确保业务逻辑的准确传承。

## 测试

**分层测试架构，确保代码质量和快速反馈**

- **就近原则**：单元测试文件与被测试文件在同一目录，命名格式：`{被测试文件名}.spec.ts`
- **集中管理**：集成测试、端到端测试统一放置在项目根目录下的 **test** 目录（src目录外）
  - 集成测试：`test/integration/`
  - 端到端测试：`test/e2e/`
- **类型分离**：单元测试与源代码同目录，集成测试按模块组织，端到端测试按功能组织
- **测试覆盖率要求**：核心业务逻辑 ≥ 80%，关键路径 ≥ 90%，所有公共 API 必须有测试用例
