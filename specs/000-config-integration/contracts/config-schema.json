{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AppConfig Schema",
  "description": "Configuration schema for Fastify API application",
  "type": "object",
  "required": ["app", "database", "server", "logging"],
  "properties": {
    "app": {
      "type": "object",
      "title": "Application Configuration",
      "required": ["name", "version", "environment"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Application name",
          "minLength": 1
        },
        "version": {
          "type": "string",
          "description": "Application version",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "environment": {
          "type": "string",
          "description": "Environment",
          "enum": ["development", "staging", "production"]
        },
        "debug": {
          "type": "boolean",
          "description": "Debug mode flag",
          "default": false
        }
      },
      "additionalProperties": false
    },
    "database": {
      "type": "object",
      "title": "Database Configuration",
      "required": ["host", "port", "username", "password", "database"],
      "properties": {
        "host": {
          "type": "string",
          "description": "Database host",
          "format": "hostname"
        },
        "port": {
          "type": "integer",
          "description": "Database port",
          "minimum": 1,
          "maximum": 65535
        },
        "username": {
          "type": "string",
          "description": "Database username",
          "minLength": 1
        },
        "password": {
          "type": "string",
          "description": "Database password",
          "minLength": 1
        },
        "database": {
          "type": "string",
          "description": "Database name",
          "minLength": 1
        },
        "ssl": {
          "type": "boolean",
          "description": "SSL connection flag",
          "default": false
        }
      },
      "additionalProperties": false
    },
    "server": {
      "type": "object",
      "title": "Server Configuration",
      "required": ["port", "host", "cors"],
      "properties": {
        "port": {
          "type": "integer",
          "description": "Server port",
          "minimum": 1,
          "maximum": 65535
        },
        "host": {
          "type": "string",
          "description": "Server host",
          "format": "hostname"
        },
        "cors": {
          "type": "object",
          "title": "CORS Configuration",
          "required": ["enabled", "origins", "methods"],
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "CORS enabled flag"
            },
            "origins": {
              "type": "array",
              "description": "Allowed origins",
              "items": {
                "type": "string",
                "format": "uri"
              },
              "minItems": 1
            },
            "methods": {
              "type": "array",
              "description": "Allowed HTTP methods",
              "items": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
              },
              "minItems": 1
            },
            "credentials": {
              "type": "boolean",
              "description": "Allow credentials",
              "default": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "logging": {
      "type": "object",
      "title": "Logging Configuration",
      "required": ["level", "format", "output"],
      "properties": {
        "level": {
          "type": "string",
          "description": "Log level",
          "enum": ["error", "warn", "info", "debug"]
        },
        "format": {
          "type": "string",
          "description": "Log format",
          "enum": ["json", "text"]
        },
        "output": {
          "type": "array",
          "description": "Output destinations",
          "items": {
            "type": "string",
            "enum": ["console", "file", "syslog"]
          },
          "minItems": 1
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
